'use strict';
const { v4: uuidv4 } = require('uuid');

/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up(queryInterface, Sequelize) {
    const tiers = [
      // Creator Tiers
      {
        id: uuidv4(),
        userType: 'creator',
        tierName: 'rising',
        tierLevel: 1,
        minDaysActive: 0,
        minCompletedDeals: 0,
        minEarnings: 0,
        minRating: null,
        minResponseRate: null,
        commissionRate: 0.20,
        searchBoostPercentage: 0,
        portfolioItemLimit: 5,
        withdrawalDays: 14,
        verifiedBadge: false,
        featuredPlacement: false,
        description: 'New creators starting their journey on CreatorsWorld',
        badgeIcon: 'star',
        badgeColor: '#9CA3AF',
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date()
      },
      {
        id: uuidv4(),
        userType: 'creator',
        tierName: 'verified',
        tierLevel: 2,
        minDaysActive: 30,
        minCompletedDeals: 5,
        minEarnings: 200000,
        minRating: 4.4,
        minResponseRate: 80,
        commissionRate: 0.18,
        searchBoostPercentage: 15,
        portfolioItemLimit: 15,
        withdrawalDays: 10,
        verifiedBadge: true,
        featuredPlacement: false,
        description: 'Verified creators with proven track record',
        badgeIcon: 'check-circle',
        badgeColor: '#CD7F32',
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date()
      },
      {
        id: uuidv4(),
        userType: 'creator',
        tierName: 'premium',
        tierLevel: 3,
        minDaysActive: 90,
        minCompletedDeals: 20,
        minEarnings: 1000000,
        minRating: 4.6,
        minResponseRate: 90,
        commissionRate: 0.15,
        searchBoostPercentage: 35,
        portfolioItemLimit: 30,
        withdrawalDays: 7,
        verifiedBadge: true,
        featuredPlacement: true,
        description: 'Premium creators delivering exceptional results',
        badgeIcon: 'award',
        badgeColor: '#C0C0C0',
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date()
      },
      {
        id: uuidv4(),
        userType: 'creator',
        tierName: 'elite',
        tierLevel: 4,
        minDaysActive: 180,
        minCompletedDeals: 50,
        minEarnings: 5000000,
        minRating: 4.8,
        minResponseRate: 95,
        commissionRate: 0.10,
        searchBoostPercentage: 60,
        portfolioItemLimit: null,
        withdrawalDays: 3,
        verifiedBadge: true,
        featuredPlacement: true,
        description: 'Elite creators at the top of their game',
        badgeIcon: 'crown',
        badgeColor: '#FFD700',
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date()
      },

      // Brand Tiers
      {
        id: uuidv4(),
        userType: 'brand',
        tierName: 'starter',
        tierLevel: 1,
        monthlyPrice: 0,
        yearlyPrice: null,
        monthlyMessageLimit: 10,
        activeCampaignLimit: 1,
        searchResultsLimit: 20,
        platformFeePercentage: 0.15,
        prioritySupport: false,
        supportResponseHours: 48,
        aiMatching: false,
        additionalBenefits: JSON.stringify(['Basic search filters', 'Standard support']),
        description: 'Free tier for brands getting started',
        badgeIcon: 'zap',
        badgeColor: '#9CA3AF',
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date()
      },
      {
        id: uuidv4(),
        userType: 'brand',
        tierName: 'growth',
        tierLevel: 2,
        monthlyPrice: 15000,
        yearlyPrice: 150000,
        monthlyMessageLimit: 50,
        activeCampaignLimit: 5,
        searchResultsLimit: 100,
        platformFeePercentage: 0.12,
        prioritySupport: false,
        supportResponseHours: 24,
        aiMatching: false,
        additionalBenefits: JSON.stringify(['Advanced search filters', 'Campaign analytics', 'Priority listing']),
        description: 'For growing brands with multiple campaigns',
        badgeIcon: 'trending-up',
        badgeColor: '#3B82F6',
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date()
      },
      {
        id: uuidv4(),
        userType: 'brand',
        tierName: 'business',
        tierLevel: 3,
        monthlyPrice: 45000,
        yearlyPrice: 450000,
        monthlyMessageLimit: 200,
        activeCampaignLimit: 20,
        searchResultsLimit: null,
        platformFeePercentage: 0.10,
        prioritySupport: true,
        supportResponseHours: 8,
        aiMatching: true,
        additionalBenefits: JSON.stringify(['AI-powered matching', 'Full analytics dashboard', 'Dedicated account support', 'API access']),
        description: 'Full-featured plan for established businesses',
        badgeIcon: 'briefcase',
        badgeColor: '#8B5CF6',
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date()
      },
      {
        id: uuidv4(),
        userType: 'brand',
        tierName: 'enterprise',
        tierLevel: 4,
        monthlyPrice: null,
        yearlyPrice: null,
        monthlyMessageLimit: null,
        activeCampaignLimit: null,
        searchResultsLimit: null,
        platformFeePercentage: null,
        prioritySupport: true,
        supportResponseHours: 1,
        aiMatching: true,
        additionalBenefits: JSON.stringify(['Custom pricing', 'Dedicated account manager', 'White-label options', 'Custom integrations', 'SLA guarantee']),
        description: 'Custom enterprise solutions for large organizations',
        badgeIcon: 'building',
        badgeColor: '#FFD700',
        isActive: true,
        createdAt: new Date(),
        updatedAt: new Date()
      }
    ];

    await queryInterface.bulkInsert('TierConfigurations', tiers, {});
  },

  async down(queryInterface, Sequelize) {
    await queryInterface.bulkDelete('TierConfigurations', null, {});
  }
};
